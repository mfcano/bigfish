<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Fish - Guild Shenanigans</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'><path fill='%2338bdf8' d='M180.5 141.5C219.7 108.5 272.6 80 336 80s116.3 28.5 155.5 61.5c39.1 33 66.9 72.4 81 99.8c4.7 9.2 4.7 20.1 0 29.3c-14.1 27.4-41.9 66.8-81 99.8C452.3 403.5 399.4 432 336 432s-116.3-28.5-155.5-61.5c-16.2-13.7-30.5-28.5-42.7-43.5L48.1 379.5c-12.5 10.1-30.8 11-44.3 2.3s-21.8-25.8-21.8-45.8V176c0-20 8.3-37.5 21.8-45.8s31.8-7.8 44.3 2.3l89.7 72.5c12.2-15 26.5-29.8 42.7-43.5zM384 218c-25-10-59.9-26-112-26s-87 16-112 26c-12.6 5.3-21 17-21 30.5c0 13.5 8.4 25.2 21 30.5c25 10 59.9 26 112 26s87-16 112-26c12.6-5.3 21-17 21-30.5c0-13.5-8.4-25.2-21-30.5z'/></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        guild: {
                            900: '#0f172a', // Deep blue/slate
                            800: '#1e293b',
                            700: '#334155',
                            accent: '#38bdf8', // Light blue
                            secondary: '#818cf8', // Indigo
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        rms: ['Verdana', 'Arial', 'Helvetica', 'sans-serif'],
                    },
                    fontSize: {
                        'rms-xs': '9px',
                        'rms-sm': '10px',
                        'rms-base': '11px',
                        'rms-lg': '12px',
                        'rms-xl': '13px',
                    }
                }
            }
        }
    </script>
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Theme: Ragnarok 2005 (RMS) - Forum Style */
        body.theme-rms {
            font-family: 'Verdana', Arial, Helvetica, sans-serif;
            font-size: 11px;
            background-color: #006699;
            color: #000000;
            background-image: none;
        }
        .theme-rms .container {
            max-width: 75%;
        }
        /* Centered content wrapper with background */
        .theme-rms main {
            background-color: #FFFFFF;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            border-left: 1px solid #000000;
            border-right: 1px solid #000000;
        }
        /* Special override for the banner text container in RMS theme */
        .theme-rms .banner-text-container h1 {
             color: #FFFFFF !important;
             font-size: 3rem !important;
             margin-bottom: 1rem;
             text-shadow: 2px 2px 4px #000000;
        }
        .theme-rms .banner-text-container p {
             color: #FFFFFF !important;
             font-size: 1.3rem !important;
             text-shadow: 1px 1px 2px #000000;
        }
        /* Header */
        .theme-rms nav {
            background: #006699;
            background: linear-gradient(to bottom, #006699 0%, #003366 100%);
            border-bottom: 0;
            height: auto;
            min-height: 40px;
        }
        .theme-rms .nav-link {
            color: #FFFFFF;
            text-decoration: none;
            font-weight: bold;
            font-size: 11px;
            padding: 0 10px;
        }
        .theme-rms .nav-link:hover {
            text-decoration: underline;
            background: transparent;
        }
        .theme-rms .nav-link.active {
            text-decoration: underline;
            background: transparent;
        }
        
        /* Forum Categories (Cards) */
        .theme-rms .card {
            background: #FFFFFF;
            border: 1px solid #000000;
            border-radius: 0;
            box-shadow: none;
            margin-bottom: 10px;
        }
        .theme-rms .card-header {
            background: #006699;
            background: linear-gradient(to bottom, #006699 0%, #003366 100%);
            color: #FFFFFF;
            font-weight: bold;
            font-size: 11px;
            padding: 5px 10px;
            border-bottom: 1px solid #000000;
        }
        
        /* Content Areas */
        .theme-rms .content-row {
            background-color: #DEE3E7;
            border-top: 1px solid #FFFFFF;
            border-bottom: 1px solid #D1D7DC;
            padding: 5px;
        }
        .theme-rms .content-row:nth-child(even) {
            background-color: #EFEFEF;
        }
        
        /* Typography */
        .theme-rms h1 { font-size: 16px; color: #000000; font-weight: bold; margin-bottom: 10px; }
        .theme-rms h2 { font-size: 14px; color: #006699; font-weight: bold; border: none; padding: 0; margin-bottom: 10px; }
        .theme-rms h3 { font-size: 12px; color: #000000; font-weight: bold; }
        .theme-rms p, .theme-rms span, .theme-rms div { font-size: 11px; }
        
        /* Buttons */
        .theme-rms button {
            font-family: 'Verdana', sans-serif;
            font-size: 10px;
            border-radius: 0 !important;
        }
        .theme-rms .btn-primary {
            background: #EFEFEF;
            border: 1px outset #FFFFFF;
            color: #000000;
            font-weight: bold;
        }
        .theme-rms .btn-primary:active {
            border: 1px inset #FFFFFF;
        }

        /* Tables */
        .theme-rms table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #000000;
        }
        .theme-rms th {
            background-color: #006699;
            color: #FFFFFF;
            font-weight: bold;
            font-size: 10px;
            text-align: center;
            border: 1px solid #000000;
            padding: 4px;
        }
        .theme-rms td {
            background-color: #DEE3E7;
            border: 1px solid #000000;
            padding: 4px;
            font-size: 11px;
            color: #000000;
        }
        .theme-rms tr:nth-child(even) td {
            background-color: #EFEFEF;
        }

        [x-cloak] { display: none !important; }
    </style>
</head>
<body 
    :class="{
        'bg-slate-50 text-slate-800': currentTheme === 'light',
        'bg-guild-900 text-slate-200': currentTheme === 'dark',
        'theme-rms': currentTheme === 'rms'
    }"
    class="min-h-screen flex flex-col transition-colors duration-300" 
    x-data="app()" 
    x-init="init()">

    <!-- Navigation -->
    <nav 
        :class="{
            'bg-white border-slate-200': currentTheme === 'light',
            'bg-guild-800 border-guild-700': currentTheme === 'dark',
            'border-b shadow-lg': currentTheme !== 'rms'
        }"
        class="sticky top-0 z-50 transition-colors duration-300">
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between" :class="currentTheme === 'rms' ? 'h-10' : 'h-16'">
                <div class="flex items-center gap-4">
                    <div class="flex items-center cursor-pointer" @click="setTab('home')">
                        <div class="flex-shrink-0 mr-2" 
                             :class="{'text-guild-accent text-2xl': currentTheme !== 'rms', 'text-white text-sm': currentTheme === 'rms'}">
                            <i class="fa-solid fa-fish"></i>
                        </div>
                        <div class="font-bold tracking-tight" 
                             :class="{'text-slate-900 text-xl': currentTheme === 'light', 'text-white text-xl': currentTheme === 'dark', 'text-white text-xs': currentTheme === 'rms'}">
                            BIG FISH
                        </div>
                    </div>
                    <!-- Server Time Display -->
                    <div class="font-mono text-xs hidden md:block" 
                         :class="{
                             'text-slate-600': currentTheme === 'light', 
                             'text-slate-400': currentTheme === 'dark', 
                             'text-white text-[10px]': currentTheme === 'rms'
                         }">
                        <span x-text="`Server: ${serverTime} (GMT) | Local: ${localTime}`"></span>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-center space-x-4">
                        <template x-for="tab in tabs" :key="tab.id">
                            <button 
                                @click="setTab(tab.id)"
                                :class="getNavClass(tab.id)"
                                class="px-3 py-2 rounded-md transition-colors duration-200 nav-link"
                                x-text="currentTheme === 'rms' ? `[ ${tab.label} ]` : tab.label"
                            ></button>
                        </template>
                        
                        <!-- Theme Selector -->
                        <div class="relative ml-4" x-data="{ open: false }">
                            <button @click="open = !open" @click.away="open = false" 
                                :class="{'text-slate-500 hover:bg-slate-100': currentTheme === 'light', 'text-slate-400 hover:bg-guild-700': currentTheme === 'dark', 'text-white hover:bg-white/20 text-xs': currentTheme === 'rms'}"
                                class="p-2 rounded-md focus:outline-none flex items-center gap-2 transition-colors">
                                <i class="fa-solid fa-palette"></i>
                                <span class="font-bold uppercase" x-text="currentTheme"></span>
                            </button>
                            
                            <div x-show="open" 
                                 class="absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 z-50 ring-1 ring-black ring-opacity-5 focus:outline-none"
                                 :class="{'bg-white': currentTheme !== 'dark', 'bg-guild-800 border border-guild-700': currentTheme === 'dark'}"
                                 x-transition>
                                <button @click="setTheme('light'); open = false" class="block px-4 py-2 text-sm w-full text-left hover:bg-gray-100 dark:hover:bg-guild-700" :class="{'text-gray-900': currentTheme !== 'dark', 'text-white': currentTheme === 'dark'}">
                                    <i class="fa-solid fa-sun w-6 text-center"></i> Light Mode
                                </button>
                                <button @click="setTheme('dark'); open = false" class="block px-4 py-2 text-sm w-full text-left hover:bg-gray-100 dark:hover:bg-guild-700" :class="{'text-gray-900': currentTheme !== 'dark', 'text-white': currentTheme === 'dark'}">
                                    <i class="fa-solid fa-moon w-6 text-center"></i> Dark Mode
                                </button>
                                <button @click="setTheme('rms'); open = false" class="block px-4 py-2 text-sm w-full text-left hover:bg-gray-100 dark:hover:bg-guild-700" :class="{'text-gray-900': currentTheme !== 'dark', 'text-white': currentTheme === 'dark'}">
                                    <i class="fa-solid fa-scroll w-6 text-center"></i> Ragnarok 2005
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="-mr-2 flex md:hidden">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" type="button" 
                        class="inline-flex items-center justify-center p-2 rounded-md focus:outline-none"
                        :class="{'text-slate-400 hover:text-slate-900 hover:bg-slate-100': currentTheme === 'light', 'text-slate-400 hover:text-white hover:bg-guild-700': currentTheme === 'dark', 'text-white hover:bg-white/20': currentTheme === 'rms'}">
                        <i class="fa-solid" :class="mobileMenuOpen ? 'fa-times' : 'fa-bars'"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden" x-show="mobileMenuOpen" x-cloak @click.away="mobileMenuOpen = false">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 border-b"
                 :class="{'bg-white border-slate-200': currentTheme === 'light', 'bg-guild-800 border-guild-700': currentTheme === 'dark', 'bg-[#006699] border-black': currentTheme === 'rms'}">
                <template x-for="tab in tabs" :key="tab.id">
                    <button 
                        @click="setTab(tab.id); mobileMenuOpen = false"
                        :class="getNavClass(tab.id)"
                        class="block w-full text-left px-3 py-2 rounded-md text-base font-medium nav-link"
                        x-text="currentTheme === 'rms' ? `[ ${tab.label} ]` : tab.label"
                    ></button>
                </template>
                <div class="border-t my-2" :class="{'border-slate-200': currentTheme === 'light', 'border-guild-700': currentTheme === 'dark', 'border-white/20': currentTheme === 'rms'}"></div>
                <div class="px-3 py-2 text-xs font-bold uppercase opacity-50" :class="{'text-slate-900': currentTheme === 'light', 'text-white': currentTheme !== 'light'}">Theme</div>
                <button @click="setTheme('light'); mobileMenuOpen = false" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium" :class="{'text-slate-900': currentTheme === 'light', 'text-white': currentTheme !== 'light'}">Light</button>
                <button @click="setTheme('dark'); mobileMenuOpen = false" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium" :class="{'text-slate-900': currentTheme === 'light', 'text-white': currentTheme !== 'light'}">Dark</button>
                <button @click="setTheme('rms'); mobileMenuOpen = false" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium" :class="{'text-slate-900': currentTheme === 'light', 'text-white': currentTheme !== 'light'}">Ragnarok 2005</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8" :class="{'max-w-[95%]': currentTheme === 'rms'}">
        
        <!-- Home Section -->
        <div x-show="currentTab === 'home'" x-transition.opacity>
            <div class="text-center py-24 relative overflow-hidden rounded-xl shadow-xl mb-12 group" 
                 :class="{'bg-[#EFEFEF] border border-black mb-4 rounded-none shadow-none py-10': currentTheme === 'rms'}">
                
                <!-- Banner Background -->
                <div class="absolute inset-0 z-0">
                    <img src="banner.png" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Guild Banner" onerror="this.style.display='none'">
                    <div class="absolute inset-0 transition-colors duration-300" 
                         :class="{
                             'bg-white/80': currentTheme === 'light', 
                             'bg-black/60': currentTheme === 'dark', 
                             'bg-[#410be1]/30': currentTheme === 'rms'
                         }"></div>
                </div>

                <div class="relative z-10" :class="{'banner-text-container': currentTheme === 'rms'}">
                    <div class="text-6xl mb-6 animate-bounce" :class="{'text-guild-accent': currentTheme !== 'rms', 'text-white text-6xl': currentTheme === 'rms'}">
                        <i class="fa-solid fa-fish"></i>
                    </div>
                    <h1 class="text-5xl font-bold mb-4" :class="{'text-slate-900': currentTheme === 'light', 'text-white': currentTheme === 'dark'}">Welcome to Big Fish</h1>
                    <p class="text-xl max-w-2xl mx-auto mb-10" :class="{'text-slate-500': currentTheme === 'light', 'text-slate-400': currentTheme === 'dark'}">
                        The premier hub for managing guild shenanigans, tracking gear, organizing events, and hunting MVPs.
                    </p>
                    <div class="flex justify-center gap-4">
                    <button @click="setTab('events')" 
                        :class="{
                            'bg-guild-accent hover:bg-cyan-400 text-white font-bold py-3 px-8 rounded-full shadow-lg': currentTheme === 'light', 
                            'bg-guild-accent hover:bg-cyan-400 text-guild-900 font-bold py-3 px-8 rounded-full shadow-lg': currentTheme === 'dark',
                            'btn-primary px-4 py-1': currentTheme === 'rms'
                        }"
                        class="transition-transform transform hover:scale-105">
                        Join Event
                    </button>
                    <button @click="setTab('gear')" 
                        :class="{
                            'bg-slate-800 hover:bg-slate-700 text-white border-slate-600 font-bold py-3 px-8 rounded-full shadow-lg border': currentTheme === 'light',
                            'bg-guild-700 hover:bg-guild-600 text-white border-guild-600 font-bold py-3 px-8 rounded-full shadow-lg border': currentTheme === 'dark',
                            'btn-primary px-4 py-1': currentTheme === 'rms'
                        }"
                        class="transition-transform transform hover:scale-105">
                        Track Gear
                    </button>
                    </div>
                </div>
            </div>
            
            <!-- Dashboard Widgets -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-10" :class="{'gap-2': currentTheme === 'rms'}">
                <div class="cursor-pointer card" 
                     @click="setTab('mvp')"
                     :class="getCardClass()">
                     <div :class="{'card-header': currentTheme === 'rms', 'hidden': currentTheme !== 'rms'}">Active MVPs</div>
                    <div class="p-6" :class="{'p-2 content-row': currentTheme === 'rms'}">
                        <div class="flex justify-between items-center mb-4" :class="{'hidden': currentTheme === 'rms'}">
                            <h3 class="text-lg font-semibold" :class="getTextClass()">Active MVPs</h3>
                            <i class="fa-solid fa-skull text-red-400"></i>
                        </div>
                        <div class="flex items-center justify-between">
                             <p class="text-3xl font-bold" :class="getTextClass()">3</p>
                             <i class="fa-solid fa-skull text-red-600" x-show="currentTheme === 'rms'"></i>
                        </div>
                        <p class="text-sm mt-2" :class="getSubTextClass()">Bosses currently spawned</p>
                    </div>
                </div>
                
                <div class="cursor-pointer card"
                     @click="setTab('events')"
                     :class="getCardClass()">
                     <div :class="{'card-header': currentTheme === 'rms', 'hidden': currentTheme !== 'rms'}">Next Event</div>
                    <div class="p-6" :class="{'p-2 content-row': currentTheme === 'rms'}">
                        <div class="flex justify-between items-center mb-4" :class="{'hidden': currentTheme === 'rms'}">
                            <h3 class="text-lg font-semibold" :class="getTextClass()">Next Event</h3>
                            <i class="fa-solid fa-calendar-days text-yellow-400"></i>
                        </div>
                         <div class="flex items-center justify-between">
                            <p class="text-xl font-bold" :class="getTextClass()">Guild War (WoE)</p>
                            <i class="fa-solid fa-calendar-days text-blue-600" x-show="currentTheme === 'rms'"></i>
                        </div>
                        <p class="text-sm mt-2" :class="getSubTextClass()">Starts in 2h 15m</p>
                    </div>
                </div>

                <div class="cursor-pointer card"
                     @click="setTab('gear')"
                     :class="getCardClass()">
                     <div :class="{'card-header': currentTheme === 'rms', 'hidden': currentTheme !== 'rms'}">Guild Bank</div>
                    <div class="p-6" :class="{'p-2 content-row': currentTheme === 'rms'}">
                        <div class="flex justify-between items-center mb-4" :class="{'hidden': currentTheme === 'rms'}">
                            <h3 class="text-lg font-semibold" :class="getTextClass()">Guild Bank</h3>
                            <i class="fa-solid fa-coins text-yellow-500"></i>
                        </div>
                        <div class="flex items-center justify-between">
                             <p class="text-3xl font-bold" :class="getTextClass()">12.5M</p>
                             <i class="fa-solid fa-coins text-yellow-600" x-show="currentTheme === 'rms'"></i>
                        </div>
                        <p class="text-sm mt-2" :class="getSubTextClass()">Zeny Accumulated</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gear Storage Tracker -->
        <div x-show="currentTab === 'gear'" x-cloak x-transition.opacity>
            <h2 class="text-3xl font-bold mb-6 border-l-4 pl-4" 
                :class="{'text-slate-900 border-guild-accent': currentTheme === 'light', 'text-white border-guild-accent': currentTheme === 'dark', 'text-[#006699] border-none pl-0 text-sm': currentTheme === 'rms'}">
                Gear Storage Tracker
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8" :class="{'block gap-0': currentTheme === 'rms'}">
                <!-- Borrowed Items List -->
                <div class="lg:col-span-2 rounded-xl shadow-lg overflow-hidden border card" :class="getCardClass()">
                    <div :class="{'card-header': currentTheme === 'rms', 'hidden': currentTheme !== 'rms'}">
                        <div class="flex justify-between items-center w-full">
                            <span>Active Loans</span>
                            <button class="btn-primary px-2 py-0.5 text-[9px] border outset">New Loan</button>
                        </div>
                    </div>
                    <div class="p-4 border-b flex justify-between items-center" 
                         :class="{'border-slate-200': currentTheme === 'light', 'border-guild-700': currentTheme === 'dark', 'hidden': currentTheme === 'rms'}">
                        <h3 class="text-lg font-semibold" :class="getTextClass()">Active Loans</h3>
                        <button class="text-sm px-3 py-1 rounded transition-colors"
                                :class="{'bg-slate-200 hover:bg-slate-300 text-slate-900': currentTheme === 'light', 'bg-guild-700 hover:bg-guild-600 text-white': currentTheme === 'dark'}">
                            <i class="fa-solid fa-plus mr-1"></i> Loan Item
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="uppercase" 
                                   :class="{'bg-slate-100 text-slate-500': currentTheme === 'light', 'bg-guild-900 text-slate-400': currentTheme === 'dark', 'bg-[#006699] text-white font-bold': currentTheme === 'rms'}">
                                <tr>
                                    <th class="px-6 py-3">Item</th>
                                    <th class="px-6 py-3">Borrower</th>
                                    <th class="px-6 py-3">Date</th>
                                    <th class="px-6 py-3">Fee Status</th>
                                    <th class="px-6 py-3">Action</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y" :class="{'divide-slate-200': currentTheme === 'light', 'divide-guild-700': currentTheme === 'dark', 'divide-none': currentTheme === 'rms'}">
                                <template x-for="item in gearLoans" :key="item.id">
                                    <tr class="transition-colors" :class="{'hover:bg-slate-50': currentTheme === 'light', 'hover:bg-guild-700': currentTheme === 'dark'}">
                                        <td class="px-6 py-4 font-medium" :class="getTextClass()" x-text="item.name"></td>
                                        <td class="px-6 py-4" :class="currentTheme === 'dark' ? 'text-slate-300' : 'text-slate-700'" x-text="item.borrower"></td>
                                        <td class="px-6 py-4" :class="getSubTextClass()" x-text="item.date"></td>
                                        <td class="px-6 py-4">
                                            <span :class="getBadgeClass(item.paid)" class="px-2 py-1 rounded-full text-xs font-bold">
                                                <span x-text="item.paid ? 'PAID' : 'PENDING'"></span>
                                            </span>
                                        </td>
                                        <td class="px-6 py-4">
                                            <button class="transition-colors" 
                                                    :class="{'text-guild-accent hover:text-sky-600': currentTheme !== 'rms', 'text-[#006699] font-bold underline text-[9px]': currentTheme === 'rms'}" 
                                                    title="Return Item">
                                                <i class="fa-solid fa-rotate-left" x-show="currentTheme !== 'rms'"></i>
                                                <span x-show="currentTheme === 'rms'">[ Return ]</span>
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Logic / Rules -->
                <div class="p-6 rounded-xl shadow-lg border h-fit card" :class="getCardClass()">
                    <div :class="{'card-header': currentTheme === 'rms', 'hidden': currentTheme !== 'rms'}">Fee Structure</div>
                    <h3 class="text-lg font-semibold mb-4" :class="{'hidden': currentTheme === 'rms', 'text-slate-900': currentTheme === 'light', 'text-white': currentTheme === 'dark'}">Fee Structure</h3>
                    <div class="space-y-4" :class="{'space-y-0': currentTheme === 'rms'}">
                        <div class="p-4 rounded-lg border" 
                             :class="{'bg-slate-50 border-slate-200': currentTheme === 'light', 'bg-guild-900 border-guild-700': currentTheme === 'dark', 'content-row border-none rounded-none p-2': currentTheme === 'rms'}">
                            <h4 class="font-bold mb-2" :class="{'text-guild-accent': currentTheme !== 'rms', 'text-[#000000]': currentTheme === 'rms'}">Active Borrower</h4>
                            <p class="text-sm" :class="getSubTextClass()">Must pay fee (AD/EDP mats, PC etc) upon borrowing high-tier items.</p>
                        </div>
                        <div class="p-4 rounded-lg border" 
                             :class="{'bg-slate-50 border-slate-200': currentTheme === 'light', 'bg-guild-900 border-guild-700': currentTheme === 'dark', 'content-row border-none rounded-none p-2': currentTheme === 'rms'}">
                            <h4 class="font-bold mb-2" :class="{'text-guild-secondary': currentTheme !== 'rms', 'text-[#000000]': currentTheme === 'rms'}">Active Contributor</h4>
                            <p class="text-sm" :class="getSubTextClass()">Eligible to receive payout fees from the guild bank based on contribution points.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MVP Tracker -->
        <div x-show="currentTab === 'mvp'" x-cloak x-transition.opacity>
            <div class="flex justify-between items-center mb-6" :class="{'mb-2': currentTheme === 'rms'}">
                <h2 class="text-3xl font-bold border-l-4 pl-4" 
                    :class="{'text-slate-900 border-red-500': currentTheme === 'light', 'text-white border-red-500': currentTheme === 'dark', 'text-[#006699] border-none pl-0 text-sm': currentTheme === 'rms'}">
                    MVP Tracker
                </h2>
                <div class="flex space-x-2">
                    <button class="text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md transition-colors"
                            :class="{'bg-red-600 hover:bg-red-700': currentTheme !== 'rms', 'btn-primary px-2 py-0.5': currentTheme === 'rms'}">
                        <i class="fa-solid fa-bell mr-2"></i> Set Alerts
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" :class="{'block gap-0': currentTheme === 'rms'}">
                <div class="col-span-3 mb-2" x-show="currentTheme === 'rms'">
                    <div class="card">
                        <div class="card-header">MVP Status List</div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr>
                                        <th>MVP Name</th>
                                        <th>Map</th>
                                        <th>Status</th>
                                        <th>Respawn</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template x-for="mvp in mvps" :key="mvp.id">
                                        <tr>
                                            <td class="font-bold">
                                                <a :href="`https://ratemyserver.net/index.php?page=mob_db&mob_id=${mvp.id}`" 
                                                   target="_blank" 
                                                   class="text-[#006699] underline hover:text-[#003366]"
                                                   x-text="mvp.name"></a>
                                            </td>
                                            <td x-text="mvp.map"></td>
                                            <td class="text-center"><span x-text="mvp.status" class="font-bold uppercase" :class="mvp.status === 'alive' ? 'text-[green]' : 'text-[red]'"></span></td>
                                            <td class="text-center font-bold" x-text="mvp.respawnTime"></td>
                                            <td class="text-center">
                                                <button class="btn-primary px-1" @click="reportKill(mvp)">[ Report ]</button>
                                            </td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Grid Cards (Hidden in RMS mode) -->
                <template x-for="mvp in mvps" :key="`card-${mvp.id}`">
                    <div class="rounded-xl overflow-hidden shadow-lg border group transition-all duration-300 relative p-4 min-h-[360px] flex flex-col"
                         x-show="currentTheme !== 'rms'"
                         :class="{'bg-white border-slate-200 hover:border-red-500': currentTheme === 'light', 'bg-black border-slate-800 hover:border-red-500': currentTheme === 'dark'}">
                        
                        <!-- MVP Sprite from RateMyServer (z-10) -->
                        <img :src="`https://file5s.ratemyserver.net/mobs/${mvp.id}.gif`" 
                             :alt="mvp.name"
                             class="pixelated absolute z-10"
                             style="image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges; max-height: 68px; left: 78%; top: 45%; transform: translate(-50%, -50%) scale(2.5);"
                             @error="$event.target.style.display='none'">
                        
                        <!-- Gradient overlay (z-20) - higher gradient -->
                        <div class="absolute inset-x-0 pointer-events-none z-20" 
                             :class="{'top-0 h-32 bg-gradient-to-b from-slate-300 to-transparent': currentTheme === 'light', 'bottom-0 h-[28rem] bg-gradient-to-t from-slate-900 to-transparent': currentTheme === 'dark'}"></div>
                        
                        <!-- Status badge (z-30) -->
                        <div class="absolute top-2 right-2 z-30">
                            <span :class="getStatusColor(mvp.status)" class="px-2 py-1 rounded text-xs font-bold uppercase" x-text="mvp.status"></span>
                        </div>
                        
                        <!-- Spacer to push content to bottom -->
                        <div class="flex-grow"></div>
                        
                        <!-- Bottom content anchored -->
                        <div class="z-30 relative">
                            <!-- MVP Name -->
                            <div class="mb-2">
                                <a :href="`https://ratemyserver.net/index.php?page=mob_db&mob_id=${mvp.id}`" 
                                   target="_blank"
                                   class="text-xl font-bold transition-colors hover:underline text-white group-hover:text-red-400" 
                                   x-text="mvp.name"></a>
                            </div>
                            
                            <!-- Map & Location -->
                            <div class="mb-3">
                                <p class="text-xs uppercase" :class="getSubTextClass()">Map & Location</p>
                                <p class="text-sm font-medium" :class="getTextClass()" x-text="mvp.map"></p>
                                <p class="text-xs" :class="getSubTextClass()" x-text="mvp.coords"></p>
                            </div>
                            
                            <!-- Respawn Window -->
                            <div class="mb-3">
                                <p class="text-xs uppercase" :class="getSubTextClass()">Respawn Window</p>
                                <p class="text-sm font-bold" :class="{'text-guild-accent': currentTheme !== 'rms'}" x-text="mvp.respawnTime"></p>
                                <p class="text-xs" :class="getSubTextClass()" x-text="getMvpRespawnInfo(mvp.id)"></p>
                            </div>
                            
                            <!-- Report Kill Button -->
                            <button class="w-full py-2 rounded transition-colors text-sm font-medium"
                                    :class="{'bg-slate-100 hover:bg-red-500 hover:text-white text-slate-700': currentTheme === 'light', 'bg-slate-700 hover:bg-red-600 text-slate-200': currentTheme === 'dark'}"
                                    @click="reportKill(mvp)">
                                Report Kill
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Events Section -->
        <div x-show="currentTab === 'events'" x-cloak x-transition.opacity>
             <h2 class="text-3xl font-bold mb-6 border-l-4 pl-4" 
                 :class="{'text-slate-900 border-yellow-500': currentTheme === 'light', 'text-white border-yellow-500': currentTheme === 'dark', 'text-[#006699] border-none pl-0 text-sm': currentTheme === 'rms'}">
                 Events & Voting
            </h2>

             <div class="grid grid-cols-1 lg:grid-cols-3 gap-8" :class="{'block gap-0': currentTheme === 'rms'}">
                <!-- Upcoming Events -->
                <div class="lg:col-span-2 space-y-6" :class="{'space-y-0': currentTheme === 'rms'}">
                    <h3 class="text-xl font-semibold" :class="{'hidden': currentTheme === 'rms', 'text-slate-900': currentTheme === 'light', 'text-white': currentTheme === 'dark'}">Upcoming Events</h3>
                    
                    <!-- RMS Style Events -->
                     <div class="card" x-show="currentTheme === 'rms'">
                        <div class="card-header">Upcoming Events</div>
                        <template x-for="event in events" :key="`rms-event-${event.id}`">
                             <div class="content-row">
                                 <div class="flex justify-between">
                                     <div class="font-bold text-[#006699]" x-text="event.title"></div>
                                     <div class="text-xs" x-text="`${event.month} ${event.day} @ ${event.time}`"></div>
                                 </div>
                                 <div class="my-1" x-text="event.description"></div>
                                 <div class="text-[10px] mb-1">
                                     <b>Roles:</b> 
                                     <template x-for="role in event.roles">
                                         <span x-text="`${role.name} (${role.filled}/${role.needed}) `"></span>
                                     </template>
                                 </div>
                                 <div class="text-right">
                                     <button class="btn-primary px-2 text-[9px]">[ Sign Up ]</button>
                                 </div>
                             </div>
                        </template>
                     </div>

                    <!-- Modern Style Events -->
                    <template x-for="event in events" :key="event.id">
                        <div class="rounded-xl p-6 border shadow-lg flex flex-col sm:flex-row gap-6 card" 
                             x-show="currentTheme !== 'rms'"
                             :class="getCardClass()">
                            <div class="rounded-lg p-4 flex flex-col items-center justify-center min-w-[100px] border text-center"
                                 :class="{'bg-slate-50 border-slate-200': currentTheme === 'light', 'bg-guild-900 border-guild-700': currentTheme === 'dark'}">
                                <span class="font-bold text-lg" :class="{'text-red-500': currentTheme === 'light', 'text-red-400': currentTheme === 'dark'}" x-text="event.month"></span>
                                <span class="text-4xl font-bold my-1" :class="getTextClass()" x-text="event.day"></span>
                                <span class="text-sm" :class="getSubTextClass()" x-text="event.time"></span>
                            </div>
                            <div class="flex-grow">
                                <h4 class="text-2xl font-bold mb-2" :class="getTextClass()" x-text="event.title"></h4>
                                <p class="mb-4" :class="getSubTextClass()" x-text="event.description"></p>
                                
                                <div class="mb-4">
                                    <p class="text-sm font-semibold mb-2" :class="{'text-guild-accent': currentTheme !== 'rms'}">Required Roles:</p>
                                    <div class="flex flex-wrap gap-2">
                                        <template x-for="role in event.roles" :key="role.name">
                                            <span :class="getRoleBadgeClass(role.filled, role.needed)" class="px-3 py-1 rounded-full text-xs border flex items-center gap-2">
                                                <span x-text="role.name"></span>
                                                <span class="font-bold" x-text="`${role.filled}/${role.needed}`"></span>
                                            </span>
                                        </template>
                                    </div>
                                </div>

                                <div class="flex gap-3">
                                    <button class="font-bold py-2 px-6 rounded-lg transition-colors"
                                            :class="{'bg-guild-accent hover:bg-cyan-400 text-white': currentTheme === 'light', 'bg-guild-accent hover:bg-cyan-400 text-guild-900': currentTheme === 'dark'}">
                                        Sign Up
                                    </button>
                                    <button class="font-medium py-2 px-4 rounded-lg transition-colors"
                                            :class="{'bg-slate-200 hover:bg-slate-300 text-slate-900': currentTheme === 'light', 'bg-guild-700 hover:bg-guild-600 text-white': currentTheme === 'dark'}">
                                        Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>

                <!-- Voting / Polls -->
                <div class="rounded-xl p-6 border shadow-lg h-fit card" 
                     :class="getCardClass()"
                     x-show="currentTheme !== 'rms'">
                     <!-- Modern Polls (hidden in RMS and replaced) -->
                    <h3 class="text-xl font-semibold mb-4 flex items-center gap-2" :class="getTextClass()">
                        <i class="fa-solid fa-check-to-slot" :class="{'text-guild-secondary': currentTheme !== 'rms'}"></i> Active Polls
                    </h3>
                    <div class="space-y-6">
                        <template x-for="poll in polls" :key="poll.id">
                            <div class="p-4 rounded-lg border" :class="{'bg-slate-50 border-slate-200': currentTheme === 'light', 'bg-guild-900 border-guild-700': currentTheme === 'dark'}">
                                <h4 class="font-bold mb-3" :class="getTextClass()" x-text="poll.question"></h4>
                                <div class="space-y-3">
                                    <template x-for="option in poll.options" :key="option.id">
                                        <div class="relative">
                                            <div class="flex justify-between text-xs mb-1" :class="getSubTextClass()">
                                                <span x-text="option.label"></span>
                                                <span x-text="`${option.percent}%`"></span>
                                            </div>
                                            <div class="w-full rounded-full h-2.5 cursor-pointer transition-colors" 
                                                 :class="{'bg-slate-200 hover:bg-slate-300': currentTheme === 'light', 'bg-guild-800 hover:bg-guild-700': currentTheme === 'dark'}"
                                                 @click="vote(poll.id, option.id)">
                                                <div class="h-2.5 rounded-full transition-all duration-500" 
                                                     :class="{'bg-guild-secondary': currentTheme !== 'rms'}"
                                                     :style="`width: ${option.percent}%`"></div>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                                <p class="text-xs mt-3 text-right" :class="getSubTextClass()" x-text="`${poll.votes} votes total`"></p>
                            </div>
                        </template>
                    </div>
                </div>
                
                <!-- RMS Polls -->
                <div class="card" x-show="currentTheme === 'rms'">
                    <div class="card-header">Active Polls</div>
                    <template x-for="poll in polls" :key="`rms-poll-${poll.id}`">
                        <div class="content-row">
                            <b x-text="poll.question"></b>
                            <ul class="list-disc list-inside ml-2">
                                <template x-for="option in poll.options">
                                    <li x-text="`${option.label} - ${option.percent}%`"></li>
                                </template>
                            </ul>
                            <div class="text-right text-[9px] mt-1">
                                <a href="#" class="text-[#006699] underline">[ Vote Now ]</a>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t py-6 mt-12"
            :class="{'bg-white border-slate-200': currentTheme === 'light', 'bg-guild-900 border-guild-800': currentTheme === 'dark', 'bg-[#E5E5E5] border-none py-4 mt-4': currentTheme === 'rms'}">
        <div class="container mx-auto px-4 text-center text-sm" :class="getSubTextClass()">
            <p x-text="currentTheme === 'rms' ? 'Powered by BigFish v1.0.0 Â© 2005' : '&copy; 2025 Big Fish Guild. All Shenanigans Reserved.'"></p>
            <div class="mt-2 space-x-4" x-show="currentTheme !== 'rms'">
                <a href="#" class="hover:text-guild-accent transition-colors"><i class="fa-brands fa-discord"></i> Discord</a>
                <a href="#" class="hover:text-guild-accent transition-colors"><i class="fa-brands fa-twitter"></i> Twitter</a>
            </div>
            <div class="mt-2 text-[10px]" x-show="currentTheme === 'rms'">
                 [ <a href="#" class="text-[#006699] underline">Admin CP</a> ] [ <a href="#" class="text-[#006699] underline">Mod CP</a> ]
            </div>
        </div>
    </footer>

    <script>
        function app() {
            return {
                currentTab: 'home',
                mobileMenuOpen: false,
                currentTheme: 'dark',
                serverTime: '',
                localTime: '',
                
                init() {
                    // Restore saved tab
                    const savedTab = localStorage.getItem('currentTab');
                    if (savedTab) {
                        this.currentTab = savedTab;
                    }
                    
                    // Check for saved theme, default to dark
                    const savedTheme = localStorage.getItem('theme');
                    if (savedTheme) {
                        this.currentTheme = savedTheme;
                    } else {
                        // Default to dark mode
                        this.currentTheme = 'dark';
                    }
                    this.applyTheme();
                    
                    // Clock
                    this.updateTime();
                    setInterval(() => this.updateTime(), 1000);
                },
                
                updateTime() {
                    const now = new Date();
                    this.localTime = now.toLocaleTimeString();
                    this.serverTime = now.toLocaleTimeString('en-US', { timeZone: 'UTC', hour12: false });
                },

                setTab(tabId) {
                    this.currentTab = tabId;
                    localStorage.setItem('currentTab', tabId);
                },

                setTheme(theme) {
                    this.currentTheme = theme;
                    this.applyTheme();
                },

                applyTheme() {
                    // Remove dark class primarily used for Tailwind's 'dark:' modifier
                    if (this.currentTheme === 'dark') {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                    localStorage.setItem('theme', this.currentTheme);
                },
                
                // Dynamic classes helper functions to keep HTML cleaner
                getNavClass(tabId) {
                    const isActive = this.currentTab === tabId;
                    if (this.currentTheme === 'light') {
                        return isActive ? 'bg-slate-100 text-slate-900' : 'text-slate-500 hover:bg-slate-100 hover:text-slate-900';
                    } else if (this.currentTheme === 'dark') {
                        return isActive ? 'bg-guild-700 text-white' : 'text-slate-400 hover:bg-guild-700 hover:text-white';
                    } else { // RMS
                        return isActive ? 'active' : '';
                    }
                },
                getCardClass() {
                    if (this.currentTheme === 'light') return 'bg-white border-slate-200 hover:border-guild-accent transition-colors';
                    if (this.currentTheme === 'dark') return 'bg-guild-800 border-guild-700 hover:border-guild-accent transition-colors';
                    return 'theme-rms-card'; // Handled by CSS
                },
                getTextClass() {
                    if (this.currentTheme === 'light') return 'text-slate-900';
                    if (this.currentTheme === 'dark') return 'text-white';
                    return 'text-[#000000]';
                },
                getSubTextClass() {
                    if (this.currentTheme === 'light') return 'text-slate-500';
                    if (this.currentTheme === 'dark') return 'text-slate-400';
                    return 'text-[#000000]';
                },
                getBadgeClass(paid) {
                    if (paid) {
                         if (this.currentTheme === 'dark') return 'bg-green-900 text-green-300';
                         if (this.currentTheme === 'light') return 'bg-green-100 text-green-800';
                         return 'text-[green] font-bold';
                    } else {
                         if (this.currentTheme === 'dark') return 'bg-red-900 text-red-300';
                         if (this.currentTheme === 'light') return 'bg-red-100 text-red-800';
                         return 'text-[red] font-bold';
                    }
                },
                getStatusColor(status) {
                    if (status === 'alive') {
                        if (this.currentTheme === 'dark') return 'bg-green-900 text-green-300 border border-green-700';
                        if (this.currentTheme === 'light') return 'bg-green-100 text-green-800 border border-green-200';
                        return 'text-[green] font-bold';
                    } else {
                        if (this.currentTheme === 'dark') return 'bg-red-900 text-red-300 border border-red-700 opacity-60';
                        if (this.currentTheme === 'light') return 'bg-red-100 text-red-800 border border-red-200 opacity-60';
                        return 'text-[red] font-bold';
                    }
                },
                getRoleBadgeClass(filled, needed) {
                    const isFull = filled >= needed;
                    if (isFull) {
                        if (this.currentTheme === 'dark') return 'bg-green-900 text-green-300 border-green-700';
                        if (this.currentTheme === 'light') return 'bg-green-100 text-green-800 border-green-200';
                        return 'text-[green] font-bold';
                    } else {
                        if (this.currentTheme === 'dark') return 'bg-guild-900 text-slate-300 border-guild-600';
                        if (this.currentTheme === 'light') return 'bg-slate-100 text-slate-700 border-slate-200';
                        return 'text-[#000000]';
                    }
                },

                tabs: [
                    { id: 'home', label: 'Home' },
                    { id: 'gear', label: 'Gear Storage' },
                    { id: 'mvp', label: 'MVP Tracker' },
                    { id: 'events', label: 'Events' }
                ],
                // Mock Data
                gearLoans: [
                    { id: 1, name: '+10 Pike [4]', borrower: 'xX_Slayer_Xx', date: '2025-05-12', paid: true },
                    { id: 2, name: 'Ghostring Card', borrower: 'HealerPls', date: '2025-05-14', paid: false },
                    { id: 3, name: 'Mjollnir', borrower: 'GuildLeader', date: '2025-05-10', paid: true },
                    { id: 4, name: 'Valkyrie Shield', borrower: 'TankBoii', date: '2025-05-15', paid: false },
                ],
                // MVP Database - Complete data from Discord bot
                mvpDatabase: {
                    1511: { name: 'Amon Ra', spawns: [{ map: 'moc_pryd06', x: 102, y: 85, delay: 60, variance: 10 }] },
                    1785: { name: 'Atroce', spawns: [
                        { map: 'ra_fild02', delay: 240, variance: 10 },
                        { map: 'ra_fild03', delay: 180, variance: 10 },
                        { map: 'ra_fild04', delay: 300, variance: 10 },
                        { map: 've_fild01', delay: 180, variance: 10 },
                        { map: 've_fild02', x: 120, y: 55, delay: 360, variance: 10 }
                    ]},
                    1399: { name: 'Baphomet', spawns: [{ map: 'prt_maze03', delay: 120, variance: 10 }] },
                    1873: { name: 'Beelzebub', spawns: [{ map: 'abbey03', delay: 720, variance: 10 }] },
                    1272: { name: 'Dark Lord', spawns: [
                        { map: 'gl_chyard', delay: 60, variance: 10 },
                        { map: 'gld_dun04', delay: 480, variance: 10 }
                    ]},
                    1719: { name: 'Detardeurus', spawns: [{ map: 'abyss_03', delay: 180, variance: 10 }] },
                    1046: { name: 'Doppelganger', spawns: [
                        { map: 'gef_dun02', delay: 120, variance: 10 },
                        { map: 'gld_dun02', delay: 480, variance: 10 }
                    ]},
                    1389: { name: 'Dracula', spawns: [{ map: 'gef_dun01', delay: 60, variance: 10 }] },
                    1112: { name: 'Drake', spawns: [{ map: 'treasure02', x: 101, y: 151, delay: 120, variance: 10 }] },
                    1115: { name: 'Eddga', spawns: [
                        { map: 'gld_dun01', delay: 480, variance: 10 },
                        { map: 'pay_fild11', delay: 120, variance: 10 }
                    ]},
                    1658: { name: 'Egnigem Cenia', spawns: [{ map: 'lhz_dun02', delay: 120, variance: 10 }] },
                    1418: { name: 'Evil Snake Lord', spawns: [{ map: 'gon_dun03', delay: 94, variance: 10 }] },
                    1871: { name: 'Fallen Bishop Hibram', spawns: [{ map: 'abbey02', x: 236, y: 78, delay: 120, variance: 10 }] },
                    1252: { name: 'Garm', spawns: [{ map: 'xmas_fild01', delay: 120, variance: 10 }] },
                    1768: { name: 'Gloom Under Night', spawns: [{ map: 'ra_san05', delay: 300, variance: 10 }] },
                    1086: { name: 'Golden Thief Bug', spawns: [{ map: 'prt_sewb4', delay: 60, variance: 10 }] },
                    1885: { name: 'Gopinich', spawns: [{ map: 'mosk_dun03', x: 207, y: 221, delay: 120, variance: 10 }] },
                    1832: { name: 'Ifrit', spawns: [{ map: 'thor_v03', delay: 660, variance: 10 }] },
                    1734: { name: 'Kiel D-01', spawns: [{ map: 'kh_dun02', delay: 120, variance: 20 }] },
                    1688: { name: 'Lady Tanee', spawns: [{ map: 'ayo_dun02', x: 150, y: 90, delay: 420, variance: 10 }] },
                    1373: { name: 'Lord of Death', spawns: [{ map: 'niflheim', delay: 133, variance: 0 }] },
                    1147: { name: 'Maya', spawns: [
                        { map: 'anthell02', delay: 120, variance: 10 },
                        { map: 'gld_dun03', delay: 480, variance: 10 }
                    ]},
                    1059: { name: 'Mistress', spawns: [{ map: 'mjolnir_04', delay: 120, variance: 10 }] },
                    1814: { name: 'Moonlight Flower', spawns: [{ map: 'pay_dun04', x: 120, y: 115, delay: 60, variance: 10 }] },
                    1087: { name: 'Orc Hero', spawns: [
                        { map: 'gef_fild02', delay: 1440, variance: 10 },
                        { map: 'gef_fild14', delay: 60, variance: 10 }
                    ]},
                    1190: { name: 'Orc Lord', spawns: [{ map: 'gef_fild10', delay: 120, variance: 10 }] },
                    1038: { name: 'Osiris', spawns: [{ map: 'moc_pryd04', delay: 60, variance: 10 }] },
                    1157: { name: 'Pharaoh', spawns: [{ map: 'in_sphinx5', delay: 60, variance: 10 }] },
                    1159: { name: 'Phreeoni', spawns: [{ map: 'moc_fild17', delay: 120, variance: 10 }] },
                    1623: { name: 'RSX-0806', spawns: [{ map: 'ein_dun02', delay: 125, variance: 10 }] },
                    1492: { name: 'Samurai Specter', spawns: [{ map: 'ama_dun03', delay: 91, variance: 10 }] },
                    1251: { name: 'Stormy Knight', spawns: [{ map: 'xmas_dun02', delay: 60, variance: 10 }] },
                    1583: { name: 'Tao Gunka', spawns: [{ map: 'beach_dun', delay: 300, variance: 10 }] },
                    1312: { name: 'Turtle General', spawns: [{ map: 'tur_dun04', x: 99, y: 93, delay: 60, variance: 10 }] },
                    1751: { name: 'Valkyrie Randgris', spawns: [{ map: 'odin_tem03', delay: 480, variance: 10 }] },
                    1685: { name: 'Vesper', spawns: [{ map: 'jupe_core', delay: 120, variance: 10 }] },
                    1630: { name: 'White Lady', spawns: [{ map: 'lou_dun03', delay: 117, variance: 10 }] },
                    1917: { name: 'Wounded Satan Morroc', spawns: [{ map: 'moc_fild22', delay: 720, variance: 60 }] },
                    2202: { name: 'Kraken', spawns: [{ map: 'iz_dun05', delay: 135, variance: 15 }] }
                },
                // Active MVP timers (mock data for demo)
                mvps: [
                    { id: 1039, name: 'Baphomet', map: 'prt_maze03', status: 'alive', respawnTime: 'Now', coords: 'Random' },
                    { id: 1046, name: 'Doppelganger', map: 'gef_dun02', status: 'dead', respawnTime: '~14 min', coords: 'Random' },
                    { id: 1086, name: 'Golden Thief Bug', map: 'prt_sewb4', status: 'alive', respawnTime: 'Now', coords: 'Random' },
                    { id: 1147, name: 'Maya', map: 'anthell02', status: 'dead', respawnTime: '1h 20m', coords: 'Random' },
                    { id: 1150, name: 'Moonlight Flower', map: 'pay_dun04', status: 'alive', respawnTime: 'Now', coords: '(120, 115)' },
                    { id: 1159, name: 'Phreeoni', map: 'moc_fild17', status: 'dead', respawnTime: '45 min', coords: 'Random' },
                ],
                events: [
                    { 
                        id: 1, 
                        title: 'War of Emperium', 
                        description: 'Weekly castle siege. All hands on deck! We are defending Valkyrie 1.', 
                        month: 'NOV', 
                        day: '23', 
                        time: '20:00 GMT',
                        roles: [
                            { name: 'Tanks', needed: 5, filled: 5 },
                            { name: 'DPS', needed: 15, filled: 12 },
                            { name: 'Support', needed: 8, filled: 4 }
                        ]
                    },
                    { 
                        id: 2, 
                        title: 'Endless Tower Run', 
                        description: 'Climbing to floor 100. Priority on geared DPS.', 
                        month: 'NOV', 
                        day: '25', 
                        time: '18:00 GMT',
                         roles: [
                            { name: 'Tanks', needed: 2, filled: 1 },
                            { name: 'DPS', needed: 6, filled: 6 },
                            { name: 'Support', needed: 3, filled: 2 }
                        ]
                    }
                ],
                polls: [
                    {
                        id: 1,
                        question: 'Next Guild Dungeon Target?',
                        votes: 42,
                        options: [
                            { id: 'a', label: 'Payon', percent: 60 },
                            { id: 'b', label: 'Geffen', percent: 25 },
                            { id: 'c', label: 'Prontera', percent: 15 }
                        ]
                    },
                    {
                        id: 2,
                        question: 'Loot Distribution Method',
                        votes: 38,
                        options: [
                            { id: 'a', label: 'DKP System', percent: 45 },
                            { id: 'b', label: 'Roll Dice', percent: 55 }
                        ]
                    }
                ],
                getMvpRespawnInfo(mvpId) {
                    const mvpData = this.mvpDatabase[mvpId];
                    if (!mvpData || !mvpData.spawns || mvpData.spawns.length === 0) {
                        return 'Unknown';
                    }
                    const spawn = mvpData.spawns[0];
                    const minDelay = spawn.delay;
                    const maxDelay = spawn.delay + spawn.variance;
                    return `${minDelay}-${maxDelay} min`;
                },
                reportKill(mvp) {
                    mvp.status = 'dead';
                    mvp.respawnTime = 'Calculating...';
                    // Simulate server update with actual respawn data
                    setTimeout(() => {
                        const mvpData = this.mvpDatabase[mvp.id];
                        if (mvpData && mvpData.spawns && mvpData.spawns.length > 0) {
                            const spawn = mvpData.spawns.find(s => s.map === mvp.map) || mvpData.spawns[0];
                            const minDelay = spawn.delay;
                            const maxDelay = spawn.delay + spawn.variance;
                            mvp.respawnTime = `${minDelay}-${maxDelay} min`;
                        } else {
                            mvp.respawnTime = '~2h 00m';
                        }
                    }, 500);
                },
                vote(pollId, optionId) {
                    alert('Vote cast! (This is a frontend demo)');
                }
            }
        }
    </script>
</body>
</html>